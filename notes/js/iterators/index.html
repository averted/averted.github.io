<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Iterators &amp; Generators #  Iterators #  Iterators are objects with a specific interface designed for iteration. All iterator objects have a next() method that returns a result object. The result object has two proerties: value, which is the next value, and done, which is a Boolean that&rsquo;s true when there are no more values to return. The iterator keeps an internal pointer to a location within a collection of values, and with each call to the next() method it returns the next appropriate value.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Iterators / Generators" />
<meta property="og:description" content="Iterators &amp; Generators #  Iterators #  Iterators are objects with a specific interface designed for iteration. All iterator objects have a next() method that returns a result object. The result object has two proerties: value, which is the next value, and done, which is a Boolean that&rsquo;s true when there are no more values to return. The iterator keeps an internal pointer to a location within a collection of values, and with each call to the next() method it returns the next appropriate value." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://averted.github.io/notes/js/iterators/" /><meta property="article:section" content="js" />



<title>Iterators / Generators | Notes</title>
<link rel="manifest" href="/notes/manifest.json">
<link rel="icon" href="/notes/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/notes/book.min.525b62cc59c40c7cc41b0d8b36a0163657cb4419334e5ee03f3a787fa6f00325.css" integrity="sha256-UltizFnEDHzEGw2LNqAWNlfLRBkzTl7gPzp4f6bwAyU=">
<script defer src="/notes/en.search.min.062000325042fb84bb78c3b3f70d5f787b020eb99840a1dff51559e4ccd4488b.js" integrity="sha256-BiAAMlBC&#43;4S7eMOz9w1feHsCDrmYQKHf9RVZ5MzUSIs="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/notes"><span>Notes</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  

  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>All</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/all/git/" class="">Git</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/all/vim/" class="">Vim</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/all/dom/" class="">DOM</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/all/osx/" class="">OSX</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Shell</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/shell/files/" class="">Files</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/shell/networking/" class="">Networking</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/shell/postgres/" class="">Postgres</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>JavaScript</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/js/classes/" class="">Classes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/js/dynamic-imports/" class="">Dynamic Imports</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/js/iterators/" class=" active">Iterators / Generators</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>TypeScript</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/ts/all/" class="">All</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/ts/generics/" class="">Generics</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>TC39</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/tc39/es2016/" class="">Es2016</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/tc39/es2017/" class="">Es2017</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/tc39/es2018/" class="">Es2018</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/tc39/es2019/" class="">Es2019</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/tc39/es2020/" class="">Es2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/tc39/es2021/" class="">Es2021</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://averted.github.io/notes/tc39/es2022/" class="">Es2022</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/notes/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Iterators / Generators</strong>

  <label for="toc-control">
    
    <img src="/notes/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#iterators--generators">Iterators &amp; Generators</a>
      <ul>
        <li><a href="#iterators">Iterators</a></li>
        <li><a href="#generators">Generators</a></li>
        <li><a href="#for-of-loops">For-of Loops</a></li>
        <li><a href="#accessing-the-default-iterator">Accessing the Default Iterator</a></li>
        <li><a href="#creating-iterables">Creating Iterables</a></li>
        <li><a href="#spread-operator-and-non-array-iterables">Spread Operator and Non-Array Iterables</a></li>
        <li><a href="#advanced-iterator-functionality">Advanced Iterator Functionality</a></li>
        <li><a href="#experiments">Experiments</a></li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h2 id="iterators--generators">
  Iterators &amp; Generators
  <a class="anchor" href="#iterators--generators">#</a>
</h2>
<h3 id="iterators">
  Iterators
  <a class="anchor" href="#iterators">#</a>
</h3>
<p><strong><em>Iterators</em></strong> are <strong>objects</strong> with a specific interface designed for iteration.
All iterator objects have a <code>next()</code> method that returns a result object.
The result object has two proerties: <code>value</code>, which is the next value, and <code>done</code>, which is a Boolean that&rsquo;s <code>true</code> when there are no more values to return.
The iterator keeps an internal pointer to a location within a collection of values, and with each call to the <code>next()</code> method it returns the next appropriate value.</p>
<p>Manually creating an iterator using ECMAScript 5 spec:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">createIterator</span>(<span style="color:#a6e22e">items</span>) {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

  <span style="color:#66d9ef">return</span> {
    <span style="color:#a6e22e">next</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>() {
      <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">done</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">length</span>);
      <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#f92672">!</span><span style="color:#a6e22e">done</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">items</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>] <span style="color:#f92672">:</span> <span style="color:#66d9ef">undefined</span>;
      <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">done</span>, <span style="color:#a6e22e">value</span> };
    }
  }
}

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">iterator</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createIterator</span>([<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]);

<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());     <span style="color:#75715e">// { value: 1, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());     <span style="color:#75715e">// { value: 2, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());     <span style="color:#75715e">// { value: 3, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());     <span style="color:#75715e">// { value: undefined, done: true }
</span></code></pre></div><p>Writing iterators manually is a bit complex, fortunately ECMAScript 6 also provides <strong><em>generators</em></strong>, which make creating iterator objects much simpler.</p>
<h3 id="generators">
  Generators
  <a class="anchor" href="#generators">#</a>
</h3>
<p>A <strong><em>generator</em></strong> is a <strong>function</strong> that returns an iterator. Generator functions are indicated by an asterisk (*) character.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createIterator</span>() {
  <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">1</span>;
  <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">2</span>;
  <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">3</span>;
}
<span style="color:#75715e">// ------------------------------------------
</span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createIterator</span>(<span style="color:#a6e22e">items</span>) {
  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
    <span style="color:#66d9ef">yield</span> <span style="color:#a6e22e">items</span>[<span style="color:#a6e22e">i</span>];
  }
}
<span style="color:#75715e">// ------------------------------------------
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">createIterator</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span>(<span style="color:#a6e22e">items</span>) {
  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
    <span style="color:#66d9ef">yield</span> <span style="color:#a6e22e">items</span>[<span style="color:#a6e22e">i</span>];
  }
}
<span style="color:#75715e">// ------------------------------------------
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> {
  <span style="color:#f92672">*</span><span style="color:#a6e22e">createIterator</span>(<span style="color:#a6e22e">items</span>) {
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
      <span style="color:#66d9ef">yield</span> <span style="color:#a6e22e">items</span>[<span style="color:#a6e22e">i</span>];
    }
  }
}
<span style="color:#75715e">// ------------------------------------------
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">iterator</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">createIterator</span>([<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>]);
<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>().<span style="color:#a6e22e">value</span>);   <span style="color:#75715e">// 1
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>().<span style="color:#a6e22e">value</span>);   <span style="color:#75715e">// 2
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>().<span style="color:#a6e22e">value</span>);   <span style="color:#75715e">// 3
</span></code></pre></div><p>Perhaps the most interesting aspect generator functions is that they stop execution after each <code>yield</code> statement.
You can only use <code>yield</code> keyword inside generators, as <code>yield</code> cannot cross funciton boundaries.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createIterator</span>(<span style="color:#a6e22e">items</span>) {
  <span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">map</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">item</span>) {
    <span style="color:#75715e">// syntax error
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">yield</span> <span style="color:#a6e22e">item</span>;
  });
}
</code></pre></div><blockquote>
<p>Note: Creating an arrow function that is also a generator is not possible.</p>
</blockquote>
<h3 id="for-of-loops">
  For-of Loops
  <a class="anchor" href="#for-of-loops">#</a>
</h3>
<p>Closely related to iterators, an <em>iterable</em> is an object with a <code>Symbol.iterator</code> property, which specifies a function that returns an iterator for the given object.
All collection objects (arrays, sets, maps) and strings are iterables in ECMAScript 6, so they have a default iterator specified.
All iterators created by generators are also iterables, because generators assign the <code>Symbol.iterator</code> property by default.</p>
<p>A <code>for-of</code> loop calls <code>next()</code> on an iterable each time the loop executes, and stores the <code>value</code> from result objet in a variable:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">items</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>];

<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">item</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">items</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">item</span>);
}
</code></pre></div><p>This <code>for-of</code> loop first calls the <code>Symbol.iterator</code> method on the <code>items</code> array to retrieve an iterator (happens behind the scenes), then <code>iterator.next()</code> is called.</p>
<h3 id="accessing-the-default-iterator">
  Accessing the Default Iterator
  <a class="anchor" href="#accessing-the-default-iterator">#</a>
</h3>
<p>You can use <code>Symbol.iterator</code> to access the default iterator for an object, like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">values</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>];
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">iterator</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">values</span>[<span style="color:#a6e22e">Symbol</span>.<span style="color:#a6e22e">iterator</span>]();

<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());
<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());
<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());
</code></pre></div><p>Because <code>Symbol.iterator</code> specifies the default iterator, you can use it to detect whether an objet is iterable or not:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isIterable</span>(<span style="color:#a6e22e">obj</span>) {
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">obj</span>[<span style="color:#a6e22e">Symbol</span>.<span style="color:#a6e22e">iterator</span>] <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;function&#39;</span>;
}
</code></pre></div><p>The <code>for-of</code> loop does a similar check before executing.</p>
<h3 id="creating-iterables">
  Creating Iterables
  <a class="anchor" href="#creating-iterables">#</a>
</h3>
<p>Developer-defined objects are not iterable by default, but you can make them iterable by creating a <code>Symbol.iterator</code> property containing a generator.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">collection</span> <span style="color:#f92672">=</span> {
  <span style="color:#a6e22e">items</span><span style="color:#f92672">:</span> [],
  <span style="color:#f92672">*</span>[<span style="color:#a6e22e">Symbol</span>.<span style="color:#a6e22e">iterator</span>]() {
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">item</span> <span style="color:#66d9ef">of</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">items</span>) {
      <span style="color:#66d9ef">yield</span> <span style="color:#a6e22e">item</span>;
    }
  }
}

<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">1</span>);
<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">2</span>);
<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">3</span>);

<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">x</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">collection</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">x</span>);                   <span style="color:#75715e">// 1 2 3
</span><span style="color:#75715e"></span>}
</code></pre></div><h3 id="spread-operator-and-non-array-iterables">
  Spread Operator and Non-Array Iterables
  <a class="anchor" href="#spread-operator-and-non-array-iterables">#</a>
</h3>
<p>The spread operator works on all iterables, and uses the default iterator to determine which values to include:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">set</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Set</span>([<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>]);
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">arr</span> <span style="color:#f92672">=</span> [...<span style="color:#a6e22e">set</span>];
<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">arr</span>);     <span style="color:#75715e">// [1,2,3,4,5]
</span></code></pre></div><h3 id="advanced-iterator-functionality">
  Advanced Iterator Functionality
  <a class="anchor" href="#advanced-iterator-functionality">#</a>
</h3>
<p>Iterators can be used for tasks other than simply iterating over a collection of values.</p>
<h4 id="passing-arguments-to-iterators">
  Passing Arguments to Iterators
  <a class="anchor" href="#passing-arguments-to-iterators">#</a>
</h4>
<p>You can pass arguments to an iterator through the <code>next()</code> method. That argument becomes the value of <code>yield</code> statement inside a generator:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createIterator</span>() {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">first</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">1</span>;
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">second</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">yield</span> <span style="color:#a6e22e">first</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>;
  <span style="color:#66d9ef">yield</span> <span style="color:#a6e22e">second</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">3</span>;
}

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">iterator</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createIterator</span>();
<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());         <span style="color:#75715e">// { value: 1, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>(<span style="color:#ae81ff">4</span>));        <span style="color:#75715e">// { value: 6, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>(<span style="color:#ae81ff">5</span>));        <span style="color:#75715e">// { value: 8, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());         <span style="color:#75715e">// { value: undefined, done: true }
</span></code></pre></div><p>The first call to <code>next()</code> is a special case where <em>any argument passed to is is lost</em>.
Because arguments passed to <code>next()</code> become the values returned by <code>yield</code>, an agrument from the first call to <code>next()</code> could only replace the first <code>yield</code> statement if it could be accessed before that <code>yield</code> statement. That&rsquo;s not possible, so there is no point passing an argument the first time <code>next()</code> is called.</p>
<h4 id="throwing-errors-in-iterators">
  Throwing Errors in Iterators
  <a class="anchor" href="#throwing-errors-in-iterators">#</a>
</h4>
<p>You can catch errors inside the generator using a <code>try-catch</code> block:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createIterator</span>() {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">first</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">1</span>;
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">second</span>;

  <span style="color:#66d9ef">try</span> {
    <span style="color:#a6e22e">second</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">yield</span> <span style="color:#a6e22e">first</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>;
  } <span style="color:#66d9ef">catch</span> () {
    <span style="color:#a6e22e">second</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>;
  }

  <span style="color:#66d9ef">yield</span> <span style="color:#a6e22e">second</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">3</span>;
}

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">iterator</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createIterator</span>();
<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());                 <span style="color:#75715e">// { value: 1, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>(<span style="color:#ae81ff">4</span>));                <span style="color:#75715e">// { value: 6, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#66d9ef">throw</span>(<span style="color:#66d9ef">new</span> Error()));     <span style="color:#75715e">// { value: 9, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());                 <span style="color:#75715e">// { value: undefined, done: true }
</span></code></pre></div><h4 id="generator-return-statements">
  Generator Return Statements
  <a class="anchor" href="#generator-return-statements">#</a>
</h4>
<p>Because generators are functions, you can use the <code>return</code> statement to exit early, and specify a return value for the <strong>last call</strong> to the <code>next()</code> method.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createIterator</span>() {
  <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">1</span>;
  <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">42</span>;
}

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">iterator</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createIterator</span>();
<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());       <span style="color:#75715e">// { value: 1, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());       <span style="color:#75715e">// { value: 42, done: true }
</span></code></pre></div><blockquote>
<p>Note: The spread operator and <code>for-of</code> loop ignore any value specified by a <code>return</code> statement.</p>
</blockquote>
<h4 id="delegating-generators">
  Delegating Generators
  <a class="anchor" href="#delegating-generators">#</a>
</h4>
<p>Generators can delegate to other generator using a special form of <code>yield</code> with an asterisk (*). I.e:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createNumberIterator</span>() {
  <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">1</span>;
  <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">2</span>;
}

<span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createColorIterator</span>() {
  <span style="color:#66d9ef">yield</span> <span style="color:#e6db74">&#39;red&#39;</span>;
  <span style="color:#66d9ef">yield</span> <span style="color:#e6db74">&#39;green&#39;</span>;
}

<span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createCombinedIterator</span>() {
  <span style="color:#66d9ef">yield</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createNumberIterator</span>();
  <span style="color:#66d9ef">yield</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createColorIterator</span>();
  <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">true</span>;
}

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">iterator</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createCombinedIterator</span>();
<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: 1, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: 2, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: &#39;red&#39;, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: &#39;green&#39;, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: true, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: undefined, done: true }
</span></code></pre></div><p>Generator delegation also lets you make further use of generator return values.
It&rsquo;s the easiest way to access returned values and can be useful when performing complex tasks.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createNumberIterator</span>() {
  <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">1</span>;
  <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">2</span>;
  <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">4</span>;
}

<span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createRepeatingIterator</span>(<span style="color:#a6e22e">count</span>) {
  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">count</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
    <span style="color:#66d9ef">yield</span> <span style="color:#e6db74">&#39;repeat&#39;</span>;
  }
}

<span style="color:#66d9ef">function</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createCombinedIterator</span>() {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">yield</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createNumberIterator</span>();
  <span style="color:#66d9ef">yield</span> <span style="color:#a6e22e">result</span>;
  <span style="color:#66d9ef">yield</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">createRepeatingIterator</span>(<span style="color:#a6e22e">result</span>);
}

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">iterator</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createCombinedIterator</span>();
<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: 1, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: 2, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: 4, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: &#39;repeat&#39;, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: &#39;repeat&#39;, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: &#39;repeat&#39;, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: &#39;repeat&#39;, done: false }
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">iterator</span>.<span style="color:#a6e22e">next</span>());           <span style="color:#75715e">// { value: undefined, done: true }
</span></code></pre></div><blockquote>
<p>Note: You can use <code>yield *</code> directly on strings (ie. <code>yield * 'hello'</code>), and string&rsquo;s default iterator will be used.</p>
</blockquote>
<h4 id="asynchronous-task-running">
  Asynchronous Task Running
  <a class="anchor" href="#asynchronous-task-running">#</a>
</h4>
<p>Much of the excitement around generators is related to async programming, especially when you&rsquo;re trying to run a <strong>sequence</strong> of async calls.
Because <code>yield</code> stops executiong and wiats for the <code>next()</code> method to be called before starting again, you can implement async calls without managing callbacks.</p>
<p>Example of a simple synchronous task runner:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">functino</span> <span style="color:#a6e22e">run</span> (<span style="color:#a6e22e">taskGenerator</span>) {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">task</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">taskGenerator</span>();

  <span style="color:#75715e">// start task
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">task</span>.<span style="color:#a6e22e">next</span>();

  <span style="color:#75715e">// recursion to keep calling next()
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">step</span>() {
    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">done</span>) {
      <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">task</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">value</span>);
      <span style="color:#a6e22e">step</span>();
    }
  }

  <span style="color:#a6e22e">step</span>();
}
</code></pre></div><p>Passing <code>result.value</code> into <code>task.next</code> as an argument, it&rsquo;s possible to pass data between <code>yield</code> calls like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">run</span>(<span style="color:#66d9ef">function</span><span style="color:#f92672">*</span>() {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">1</span>;
  <span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">yield</span> <span style="color:#a6e22e">value</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">3</span>;
});
</code></pre></div><p>Example of async task runner (just pass a callback Fn into result.value):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">fs</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;fs&#39;</span>);

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">run</span>(<span style="color:#a6e22e">taskGenerator</span>) {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">task</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">taskGenerator</span>();
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">task</span>.<span style="color:#a6e22e">next</span>();

  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">step</span>() {
    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">done</span>) {
      <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;function&#39;</span>) {
        <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">value</span>((<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">data</span>) =&gt; {
          <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
            <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">task</span>.<span style="color:#66d9ef">throw</span>(<span style="color:#a6e22e">err</span>);
            <span style="color:#66d9ef">return</span>;
          }

          <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">task</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">data</span>);
          <span style="color:#a6e22e">step</span>();
        });
      } <span style="color:#66d9ef">else</span> {
        <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">task</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">value</span>);
        <span style="color:#a6e22e">step</span>();
      }
    }
  }

  <span style="color:#a6e22e">step</span>();
}

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">readFile</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">filename</span>) =&gt; (<span style="color:#a6e22e">cb</span>) =&gt; { <span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">readFile</span>(<span style="color:#a6e22e">filename</span>, <span style="color:#a6e22e">cb</span>) }
<span style="color:#a6e22e">run</span>(<span style="color:#66d9ef">function</span><span style="color:#f92672">*</span>() {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">contents</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">yield</span> <span style="color:#a6e22e">readFile</span>(<span style="color:#e6db74">&#39;config.json&#39;</span>)<span style="color:#f92672">:</span>
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Done&#39;</span>);
});
</code></pre></div><p>Above example performs async <code>readFile()</code> operation withou making any callbakcs visible in the main code.
Aside from <code>yield</code> the code looks the same as synch code.</p>
<h3 id="experiments">
  Experiments
  <a class="anchor" href="#experiments">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Collection</span> {
  <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">items</span>) {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">items</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">items</span> <span style="color:#f92672">||</span> [];
  }

  <span style="color:#f92672">*</span>[<span style="color:#a6e22e">Symbol</span>.<span style="color:#a6e22e">iterator</span>]() {
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
      <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">items</span>[<span style="color:#a6e22e">i</span>];
    }

    <span style="color:#75715e">// OR
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// yield *this.items.values();
</span><span style="color:#75715e"></span>  }

  <span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">fn</span>) {
    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> [];

    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">fn</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;function&#39;</span>) {
      <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">item</span> <span style="color:#66d9ef">of</span> <span style="color:#66d9ef">this</span>) {
        <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">fn</span>(<span style="color:#a6e22e">item</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#a6e22e">item</span>)));
      }
    }

    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">result</span>;
  }

  <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">item</span>) {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">item</span>);
  }

  <span style="color:#a6e22e">remove</span>(<span style="color:#a6e22e">item</span>) {
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">idx</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#a6e22e">item</span>);

    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">idx</span> <span style="color:#f92672">&gt;</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">splice</span>(<span style="color:#a6e22e">idx</span>, <span style="color:#ae81ff">1</span>);
    }
  }

  <span style="color:#a6e22e">removeAt</span>(<span style="color:#a6e22e">idx</span>) {
    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">items</span>[<span style="color:#a6e22e">idx</span>]) {
      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">splice</span>(<span style="color:#a6e22e">idx</span>, <span style="color:#ae81ff">1</span>);
    }
  }
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PaginatedCollection</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Collection</span> {
  <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">props</span>) {
    <span style="color:#66d9ef">super</span>(<span style="color:#a6e22e">props</span>);

    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">pagination</span> <span style="color:#f92672">=</span> {
      <span style="color:#a6e22e">pages</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
      <span style="color:#a6e22e">current</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    }
  }
}

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">objects</span> <span style="color:#f92672">=</span> [{ <span style="color:#a6e22e">a</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;a&#39;</span> }, { <span style="color:#a6e22e">b</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;b&#39;</span> }, { <span style="color:#a6e22e">c</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;c&#39;</span> }];
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">p</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PaginatedCollection</span>(<span style="color:#a6e22e">objects</span>);
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">added</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">added</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;added&#39;</span> };
<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">added</span>);
<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">add</span>({ <span style="color:#a6e22e">d</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;d&#39;</span> });
<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">remove</span>(<span style="color:#a6e22e">added</span>);

<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;-- paginated&#39;</span>, <span style="color:#a6e22e">p</span>)

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">test</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>, <span style="color:#a6e22e">idx</span>) =&gt; {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">item</span>, <span style="color:#a6e22e">idx</span>);
  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">a</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">item</span>;
  }
});

<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;-- test&#39;</span>, <span style="color:#a6e22e">test</span>)
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#iterators--generators">Iterators &amp; Generators</a>
      <ul>
        <li><a href="#iterators">Iterators</a></li>
        <li><a href="#generators">Generators</a></li>
        <li><a href="#for-of-loops">For-of Loops</a></li>
        <li><a href="#accessing-the-default-iterator">Accessing the Default Iterator</a></li>
        <li><a href="#creating-iterables">Creating Iterables</a></li>
        <li><a href="#spread-operator-and-non-array-iterables">Spread Operator and Non-Array Iterables</a></li>
        <li><a href="#advanced-iterator-functionality">Advanced Iterator Functionality</a></li>
        <li><a href="#experiments">Experiments</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












